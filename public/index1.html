<!DOCTYPE html>
<html>
<head>
	<title>Evangelio</title>
	<meta name='viewport', content='width=device-width, initial-scale=1'>
	<meta charset='utf-8'>
	<meta name="theme-color" content="#a1952e">
	<link rel="manifest" href="manifest.json">
	<meta name="msapplication-TileColor" content="#33dfa0">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="application-name" content="Gospel">
	<link rel="icon" sizes="16x16" href="favicon.ico">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-title" content="Gospel">
	<link rel="apple-touch-icon" href="./icon-291px.svg.png">
	<meta name="msapplication-TileImage" content="calculator-128.png">

	<script>
	
	</script>

	<style type="text/css">
		.text {
			font-size: 20px;
			color: white;
			line-height: 2;
		}
		html {
			background-color: black;
		}
		.header-bible {
			margin: auto;
			display: block;
		}

		@-webkit-keyframes fadeIn {
			from { 	opacity: 0; }
			to { opacity: 1; }
		}

		@keyframes fadeIn {
			from { opacity: 0; }
			to { opacity: 1; }
		}

		.fadeIn {
			-webkit-animation-name: fadeIn;
			animation-name: fadeIn;
		}

		.animated {
			-webkit-animation-duration: 1s;
			animation-duration: 1s;
			-webkit-animation-fill-mode: both;
			animation-fill-mode: both;
		}
	</style>

</head>
<body>
	<label for="gospel">Evangelio:</label>
	
	<div id="gospel" class="text animated">Cargando ... </div>
	<label for="reflexion">Reflexion</label>
	<div id="reflexion" class="text animated">Cargando ... </div>
	<script>
		//window.onload = function() {
		/*var tiny_ajax = function(m,u,c,d){with(new XMLHttpRequest)onreadystatechange = function(){readyState^4||c(this)},open(m,u),send(d)};
		(function() {
			
			tiny_ajax('get', '/getGospel', function (xhr) {
				var text = document.getElementById("gospel");
				text.classList.toggle("fadeIn");
				text.innerHTML = xhr.responseText;
			});

			tiny_ajax('get', '/getReflexion', function (xhr) {
				var text = document.getElementById("reflexion");
				var el = document.createElement( 'html' );
				el.innerHTML = xhr.responseText;
				var source = el.querySelector("audio a").href;
				text.classList.toggle("fadeIn");
				var audio = "<audio controls><source src='"+source+"' type='audio/mpeg'>Your browser does not support the audio element.</audio>";
				text.innerHTML = audio;
			});
		//};
		})();*/
	</script>
	<script src="socket.io.js"></script>
	<script>
		var socket = io();

		socket.on('gospel ready', function(msg){
			console.log("gospel ready CLI")
			var text = document.getElementById("gospel");
			text.classList.toggle("fadeIn");
			text.innerHTML = msg;
		});
		
		socket.on('reflexion ready', function(msg){
			console.log("reflexion ready CLI")
			var text = document.getElementById("reflexion");
			var el = document.createElement( 'html' );
			el.innerHTML = msg;
			var source = el.querySelector("audio a").href;
			text.classList.toggle("fadeIn");
			var audio = "<audio controls><source src='"+source+"' type='audio/mpeg'>Your browser does not support the audio element.</audio>";
			text.innerHTML = audio;
		});
	</script>
</body>
</html>